<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz App Subscription</title>
<style>
body{font-family:Arial,sans-serif; text-align:center; padding:5px; background:#f4f6f9;}
button{padding:15px 30px; font-size:18px; background:#3f51b5; color:white; border:none; border-radius:5px; cursor:pointer;}
button:hover{background:#303f9f;}





    a{
            color:rgb(255, 123, 0);
        }
        a:hover{
            color:rgb(41, 40, 40);
        }
.content{
    margin:10px;
}
    
footer{
    background-color:#f1f3f5;
    color:rgb(199, 30, 30);
    height:400px;
    margin:5px;
    padding-top: 5px;

}
.footer-content{
    margin:10px;
    text-align: justify;
    color:black;
}
</style>
</head>
<body>

<h2>Subscribe for 1-Year Access</h2>
<p>Pay â‚¦2,600 to unlock full access to the Quiz App for 1 year.</p>
<button id="payBtn">Pay Now with Paystack</button><br><br><br>


<center>
       <footer>
        <p class="footer-content">Note that Passkey will be sent to your Email Address or WhatsApp Number, in order to  get your passkey after making payments, ensure you fill out  correct 
            details, email address, your full name, phone number on our payment platform, it will also help you to retrieve your passkey when you lost it. for further enquiry send (NSQAP enquiry) to this Whatsapp Link <a href="https://wa.me/7010067689">For More Enquiry</a> </p><br>
             
<center><p>Mail support:</p></center>
            <a href="mailto:solomonidowumichael@yahoo.com">solomonidowumichael@yahoo.com</a><br>
             <a href="mailto:support@noblestudio.com.ng">support@noblestudio.com.ng</a>
            <h3>Website</h3>
            <a href="https://noblestudio.com.ng">Noble Studio Lagos</a>
        </p>
       </footer>
        </center>

<script>
document.addEventListener("deviceready", function() {

    const paystackPublicKey = "pk_live_ff6f89169eb0390d93a0777c949d59a3982a21e4"; // Replace with your Paystack public key
    const amount = 2600 * 100; // Paystack expects kobo
    const currency = "NGN";
    const reference = "QUIZAPP_" + Date.now();

    const payBtn = document.getElementById("payBtn");

    payBtn.addEventListener("click", function(){

        const email = prompt("Enter your email for payment receipt");

        if(!email){
            alert("Email is required for payment!");
            return;
        }

        // Open Paystack payment page in InAppBrowser
        const payUrl = `https://checkout.paystack.com/?email=${email}&amount=${amount}&currency=${currency}&reference=${reference}&key=${paystackPublicKey}`;
       
        const ref = cordova.InAppBrowser.open(payUrl, "_blank", "location=yes,toolbar=yes");

        // Listen to URL changes to detect success
        ref.addEventListener("loadstart", function(event){
            const url = event.url;
            // Paystack redirects to https://your-success-url?reference=xxxx on success
            // We'll just detect if the URL contains 'reference' as a simple check
            if(url.indexOf("reference=") !== -1){
                alert("âœ… Payment successful!");
                // Activate subscription locally
                localStorage.setItem("quizAppSubscriptionActive","true");
                localStorage.setItem("quizAppSubscriptionStart", Date.now());
                localStorage.setItem("quizAppSubscriptionEnd", Date.now() + 365*24*60*60*1000);
                ref.close(); // close InAppBrowser
                alert("ðŸŽ‰ Subscription activated for 1 year!");
                location.href = "index.html"; // redirect to main app page
            }
        });

        ref.addEventListener("exit", function(){
            console.log("Payment window closed.");
        });

    });

}, false);
</script>

</body>
</html>